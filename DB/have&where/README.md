# В чем отличие where и have?

В SQL, WHERE и HAVING оба используются для фильтрации данных, но применяются в разных контекстах и на разных этапах выполнения запроса.

### Основные отличия между WHERE и HAVING:
### 1. Когда применяется:
- WHERE: Используется для фильтрации строк до того, как происходят агрегации (например, GROUP BY). Он применяется к строкам данных, отбирая их до того, как данные будут группироваться или агрегироваться.
- HAVING: Используется для фильтрации групп данных после того, как они были агрегированы (например, после выполнения GROUP BY). То есть, его используют для фильтрации уже агрегированных данных.

### 2. Тип данных:
- WHERE: Применяется к столбцам данных (поля таблиц) до их агрегации. Вы можете фильтровать строки по конкретным значениям в столбцах (например, на основе чисел, дат или строк).
- HAVING: Применяется к агрегированным значениям (например, результатам функций, таких как COUNT(), SUM(), AVG(), и т.д.). То есть, если вы хотите фильтровать результаты агрегированных данных, например, отфильтровать группы по сумме, то используете HAVING.

### 3. Применение с агрегатными функциями:
- WHERE: Не может использовать агрегатные функции (например, COUNT(), SUM()), так как фильтрация происходит до выполнения агрегации.
- HAVING: Используется в сочетании с агрегатными функциями, так как фильтрация происходит после того, как агрегация завершена.

### Примеры:
#### Пример с WHERE:
```sql
SELECT name, age
FROM employees
WHERE age > 30;
```
- В этом примере используется WHERE для фильтрации строк по возрасту. Этот фильтр применяется до агрегации данных.

#### Пример с HAVING:
```sql
SELECT department, COUNT(*) AS num_employees
FROM employees
GROUP BY department
HAVING COUNT(*) > 10;
```
Здесь мы группируем данные по отделам (GROUP BY) и используем HAVING для фильтрации групп, у которых больше 10 сотрудников. HAVING работает с агрегированными данными, созданными функцией COUNT().

### Резюме:
- WHERE фильтрует данные на уровне строк, до выполнения агрегации.
- HAVING фильтрует данные на уровне групп, после выполнения агрегации.
#### Можно ли использовать WHERE с агрегатами?
- Нет, вы не можете использовать агрегатные функции (например, COUNT(), SUM()) в WHERE, потому что они работают после того, как строки были выбраны.

#### Можно ли использовать HAVING без GROUP BY?
- Да, HAVING может быть использован без GROUP BY, но в этом случае он будет работать так же, как и WHERE, фильтруя только агрегированные данные.
