# Индексы
Индекс в базе данных — это структура данных, которая помогает ускорить выполнение операций поиска, сортировки и фильтрации.

### Основные типы индексов

#### 1. B-tree (по умолчанию)
   **B-tree** (или Binary Tree) — это наиболее распространённый тип индекса. Он идеально подходит для поиска, сортировки и диапазонных запросов.

- Когда использовать: индексы B-tree лучше всего подходят для поиска по точному совпадению (=), диапазонам (<, <=, >, >=, BETWEEN), а также для сортировки (ORDER BY).
- Как работает: B-tree хранит данные в виде сбалансированного дерева, где каждый узел содержит значение и указатель на другие узлы. Это позволяет эффективно искать значения и выполнять операции с диапазонами.
#### Пример создания индекса на колонке:

```sql
CREATE INDEX idx_name ON employees (name);
```

#### 2. Hash индекс
   **Hash индексы** используются только для операций равенства (=). Они могут быть полезны, если вам нужно искать только по точному совпадению.

- **Когда использовать:** если вам нужно делать много запросов с равенством, например, WHERE column = value.
- **Как работает:** хеширование применяет функцию хеширования к данным и сохраняет их в виде хеш-таблицы. Это позволяет быстро находить точное значение, но не работает для диапазонных запросов.
#### Пример создания hash индекса:

```sql
CREATE INDEX idx_hash_name ON employees USING hash (name);
```
#### Ограничения:
- Hash индексы не могут использоваться для операций типа BETWEEN, <, >, и не подходят для сортировки.
- Этот тип индекса реже используется, чем B-tree, так как он имеет более ограниченное применение.
#### 3. GiST (Generalized Search Tree)
   **GiST** — это общее дерево поиска, которое можно настроить для различных типов данных и приложений. Этот тип индекса используется для работы с более сложными типами данных, такими как геометрические объекты, полнотекстовый поиск, поисковые запросы по диапазонам и другие.

- **Когда использовать:** для работы с географическими данными (например, координатами), для полнотекстового поиска или работы с диапазонами данных.
- **Как работает:** GiST индекс может быть настроен для различных типов данных. Он эффективно обрабатывает запросы с данными, которые имеют сложные структуры, например, деревья или многоуровневые данные.
#### Пример создания GiST индекса для географических данных:

```sql
CREATE INDEX idx_gist_geom ON locations USING gist (geom);
```
#### 4. GIN (Generalized Inverted Index)
   **GIN индекс** используется для данных, которые могут содержать несколько значений, например, массивы, текстовые поисковые запросы или типы данных JSONB.

- **Когда использовать:** если у вас есть данные с множественными значениями (например, массивы или JSONB).
- **Как работает:** GIN индекс представляет собой структуру данных, в которой каждый элемент данных сопоставляется с набором ключей. Это позволяет эффективно выполнять запросы по многозначным полям.
#### Пример создания GIN индекса для JSONB:
```sql
CREATE INDEX idx_gin_json ON products USING gin (product_info);
```
#### 5. BRIN (Block Range INdex)
   **BRIN индексы** полезны для очень больших таблиц, где данные имеют некоторую природную сортировку или последовательность (например, временные данные).
- **Когда использовать:** для очень больших таблиц, где данные упорядочены или группируются по диапазонам (например, временные метки).
- **Как работает:** BRIN индекс разбивает таблицу на блоки и хранит информацию о диапазоне значений в каждом блоке. Он не индексирует каждое значение, а индексирует блоки, что делает его эффективным для очень больших таблиц.
#### Пример создания BRIN индекса:

```sql
CREATE INDEX idx_brin_timestamp ON events USING brin (event_time);
```
#### 6. SP-GiST (Space-partitioned Generalized Search Tree)
   **SP-GiST индекс** используется для данных, которые имеют пространственное распределение (например, географические данные, деревья или графы).
- **Когда использовать:** для пространственных и иерархических данных.
- **Как работает:** SP-GiST использует разделение пространства для эффективного поиска и обработки данных, которые распределены по географическим координатам или организованы в виде деревьев.
#### Пример создания SP-GiST индекса:

```sql
CREATE INDEX idx_spgist_tree ON trees USING spgist (location);
```


