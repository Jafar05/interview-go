# Что такое транзакция?

**Транзакция** — это набор операций, которые выполняются как единое целое. В контексте баз данных транзакция гарантирует, что операции в рамках этой группы будут выполнены полностью и корректно, либо вообще не будут выполнены, если произошла ошибка. Это важный механизм для обеспечения целостности и согласованности данных.

### Основные характеристики транзакции:
1. ACID-свойства: Транзакции должны следовать принципам, известным как ACID. Это аббревиатура, которая описывает четыре ключевых свойства:
- Atomicity (Атомарность): Все операции в транзакции выполняются полностью или не выполняются вовсе. Если одна операция не может быть выполнена, вся транзакция откатывается (например, отменяется).
- Consistency (Согласованность): Транзакция приводит базу данных из одного согласованного состояния в другое. После завершения транзакции база данных должна быть в корректном состоянии.
- Isolation (Изолированность): Операции одной транзакции должны быть изолированы от других транзакций. Даже если несколько транзакций выполняются одновременно, каждая должна быть выполнена так, как будто она единственная.
- Durability (Долговечность): После того как транзакция была успешно завершена (commit), ее изменения должны сохраняться в базе данных, даже если система выйдет из строя.

2. Типы транзакций:
- Commit: После выполнения всех операций транзакция подтверждается командой COMMIT. Это означает, что изменения, внесенные в рамках транзакции, становятся постоянными.
- Rollback: Если в процессе выполнения транзакции произошла ошибка, можно откатить все изменения с помощью команды ROLLBACK. Это возвращает базу данных в состояние до начала транзакции.
- Пример транзакции в SQL: Рассмотрим пример транзакции, которая выполняет две операции: перевод денег с одного счета на другой. Если одна из операций не удалась (например, недостаточно средств на одном из счетов), вся транзакция должна быть откатана.

```sql
BEGIN TRANSACTION;

UPDATE accounts SET balance = balance - 100 WHERE account_id = 1;
UPDATE accounts SET balance = balance + 100 WHERE account_id = 2;

-- Если все прошло успешно
COMMIT;

-- Если произошла ошибка
-- ROLLBACK;
```
### Применение в реальном мире: Транзакции используются во многих сферах, например:

- Базы данных: Например, при изменении данных в нескольких таблицах необходимо, чтобы все изменения происходили как единое целое.
- Финансовые операции: При переводе средств между счетами важно, чтобы деньги были списаны с одного счета и зачислены на другой. Если операция не может быть завершена, важно откатить все изменения, чтобы избежать потерь.

### Преимущества транзакций:
- Целостность данных: Транзакции помогают гарантировать, что данные будут всегда в консистентном и правильном состоянии.
- Обработка ошибок: В случае ошибки можно откатить все изменения, сделанные в рамках транзакции.
- Параллельность: Транзакции позволяют параллельно выполнять несколько операций без нарушения целостности данных.

### Заключение:
**Транзакция** — это важный механизм для обеспечения надежности и целостности данных в приложениях, работающих с базами данных. Она гарантирует, что операции либо будут выполнены полностью, либо откатятся, если возникнут проблемы.
